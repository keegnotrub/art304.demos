/*!
 * jQuery FancyZoom Plugin
 * version: 1.00 (18-AUG-2011)
 * @requires jQuery v1.6.2 or later
 *
 * Examples and documentation at: http://github.com/krug/jquery.fancyzoom/
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
;(function(c){c.extend(jQuery.easing,{easeInOutCubic:function(a,b,d,g,k){if((b/=k/2)<1)return g/2*b*b*b+d;return g/2*((b-=2)*b*b+2)+d}});c.fn.fancyZoom=function(w){var x=c.extend({minBorder:90},w);var t=new y(x);this.each(function(a){c(this).mouseover(t.preload);c(this).click(t.show)});function z(a){var b=0;var d=0;var g=50;var k=12;if(a.childNodes.length>0){a=a.childNodes[0]}if(a.width&&a.height){g=a.width;k=a.height}do{b+=a.offsetLeft;d+=a.offsetTop}while(a=a.offsetParent)return{left:b,top:d,width:g,height:k}};function A(){var a=window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body.clientWidth||0;var b=window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body.clientHeight||0;var d=window.pageXOffset||document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft||0;var g=window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop||0;return{width:a,height:b,scrollX:d,scrollY:g}};function y(l){var l=l;var m=false;var q=false;var n=new Image();var r=0;var s=0;var i,f;var j,e,o,h;j=c("#zoom_spin");if(j.length==0){j=c(document.createElement("div"));j.attr("id","zoom_spin");c("body").append(j)}e=c("#zoom");if(e.length==0){e=c(document.createElement("div"));e.attr("id","zoom");c("body").append(e)}o=c("#zoom_img");if(o.length==0){o=c(document.createElement("img"));o.attr("id","zoom_img");e.append(o)}h=c("#zoom_close");if(h.length==0){h=c(document.createElement("div"));h.attr("id","zoom_close");e.append(h)}this.preload=function(a){var b=this.getAttribute("href");if(n.src!=b){q=true;n=new Image();c(n).load(function(){q=false});n.src=b}};this.show=function(a){f=A();i=z(this);if(q){if(r==0){B(this)}}else{u(this)}a.preventDefault()};function C(a){if(q){j.css("backgroundPosition","0 "+s*50+"px");if(++s==12)s=0}else{clearInterval(r);r=0;j.hide();u(a)}};function B(a){j.css({left:(f.width/2)+"px",top:((f.height/2)+f.scrollY)+"px",backgroundPosition:"0 0",display:"block"});s=1;r=setInterval(function(){C(a)},100)};function u(a){if(m)return false;m=true;o.attr("src",a.getAttribute("href"));var b=n.width;var d=n.height;var g=b/d;if(b>f.width-l.minBorder){b=f.width-l.minBorder;d=b/g}if(d>f.height-l.minBorder){d=f.height-l.minBorder;b=d*g}var k=(f.height/2)-(d/2)+f.scrollY;var D=(f.width/2)-(b/2);h.hide();e.hide().css({left:i.left+"px",top:i.top+"px",width:i.width+"px",height:i.height+"px"});e.animate({left:D+'px',top:k+'px',width:b+"px",height:d+"px",opacity:"show"},200,"easeInOutCubic",function(){h.fadeIn();h.click(p);e.click(p);c(document).keyup(v);m=false})};function p(){if(m)return false;m=true;h.hide();e.animate({left:i.left+"px",top:i.top+"px",opacity:"hide",width:i.width+"px",height:i.height+"px"},200,"easeInOutCubic",function(){m=false});e.unbind('click',p);h.unbind('click',p);c(document).unbind('keyup',v)};function v(a){if(a.keyCode==27){p()}}}}})(jQuery);